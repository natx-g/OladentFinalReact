{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const BASE_URL=\"https://react-http-b8415-default-rtdb.firebaseio.com/\";const AuthContext=/*#__PURE__*/React.createContext({isLoggedIn:false,onLogout:()=>{},onLogin:()=>{}});export function AuthContextProvider(props){const[isLoggedIn,setIsLoggedIn]=useState(false);useEffect(()=>{const isAuthenticated=localStorage.getItem(\"isLoggedIn\");if(isAuthenticated===\"1\"){setIsLoggedIn(true);}},[]);const fetchUser=async email=>{const url=\"\".concat(BASE_URL,\"users.json?orderBy=\\\"email\\\"&equalTo=\\\"\").concat(email,\"\\\"\");const response=await fetch(url);if(!response.ok)throw new Error(\"Algo sali칩 mal\");return await response.json();};const loginHandler=async(email,callback)=>{try{const user=await fetchUser(email);const userId=Object.keys(user)[0];if(!userId)throw new Error(\"Correo inv치lido\");localStorage.setItem(\"isLoggedIn\",\"1\");localStorage.setItem(\"userId\",userId);setIsLoggedIn(true);return callback();}catch(error){console.log(\"Error:\",error.message);}};const logoutHandler=()=>{localStorage.removeItem(\"isLoggedIn\");localStorage.removeItem(\"userId\");setIsLoggedIn(false);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{isLoggedIn,onLogout:logoutHandler,onLogin:loginHandler},children:props.children});}export default AuthContext;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","BASE_URL","AuthContext","createContext","isLoggedIn","onLogout","onLogin","AuthContextProvider","props","setIsLoggedIn","isAuthenticated","localStorage","getItem","fetchUser","email","url","concat","response","fetch","ok","Error","json","loginHandler","callback","user","userId","Object","keys","setItem","error","console","log","message","logoutHandler","removeItem","Provider","value","children"],"sources":["/Users/natxgarcia/Bedu/final-oladent/src/context/AuthContext.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nconst BASE_URL = \"https://react-http-b8415-default-rtdb.firebaseio.com/\";\n\nconst AuthContext = React.createContext({\n  isLoggedIn: false,\n  onLogout: () => {},\n  onLogin: () => {},\n});\n\nexport function AuthContextProvider(props) {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    const isAuthenticated = localStorage.getItem(\"isLoggedIn\");\n\n    if (isAuthenticated === \"1\") {\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const fetchUser = async (email) => {\n    const url = `${BASE_URL}users.json?orderBy=\"email\"&equalTo=\"${email}\"`;\n    const response = await fetch(url);\n\n    if (!response.ok) throw new Error(\"Algo sali칩 mal\");\n\n    return await response.json();\n  };\n\n  const loginHandler = async (email, callback) => {\n    try {\n      const user = await fetchUser(email);\n      const userId = Object.keys(user)[0];\n      if (!userId) throw new Error(\"Correo inv치lido\");\n      localStorage.setItem(\"isLoggedIn\", \"1\");\n      localStorage.setItem(\"userId\", userId);\n      setIsLoggedIn(true);\n      return callback();\n    } catch (error) {\n      console.log(\"Error:\", error.message);\n    }\n  };\n\n  const logoutHandler = () => {\n    localStorage.removeItem(\"isLoggedIn\");\n    localStorage.removeItem(\"userId\");\n    setIsLoggedIn(false);\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isLoggedIn,\n        onLogout: logoutHandler,\n        onLogin: loginHandler,\n      }}\n    >\n      {props.children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContext;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBACnD,KAAM,CAAAC,QAAQ,CAAG,uDAAuD,CAExE,KAAM,CAAAC,WAAW,cAAGN,KAAK,CAACO,aAAa,CAAC,CACtCC,UAAU,CAAE,KAAK,CACjBC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAClBC,OAAO,CAAEA,CAAA,GAAM,CAAC,CAClB,CAAC,CAAC,CAEF,MAAO,SAAS,CAAAC,mBAAmBA,CAACC,KAAK,CAAE,CACzC,KAAM,CAACJ,UAAU,CAAEK,aAAa,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAEnDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,eAAe,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAE1D,GAAIF,eAAe,GAAK,GAAG,CAAE,CAC3BD,aAAa,CAAC,IAAI,CAAC,CACrB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,SAAS,CAAG,KAAO,CAAAC,KAAK,EAAK,CACjC,KAAM,CAAAC,GAAG,IAAAC,MAAA,CAAMf,QAAQ,4CAAAe,MAAA,CAAuCF,KAAK,MAAG,CACtE,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACH,GAAG,CAAC,CAEjC,GAAI,CAACE,QAAQ,CAACE,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,gBAAgB,CAAC,CAEnD,MAAO,MAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAC9B,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAOR,KAAK,CAAES,QAAQ,GAAK,CAC9C,GAAI,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAX,SAAS,CAACC,KAAK,CAAC,CACnC,KAAM,CAAAW,MAAM,CAAGC,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC,CAAC,CAAC,CAAC,CACnC,GAAI,CAACC,MAAM,CAAE,KAAM,IAAI,CAAAL,KAAK,CAAC,iBAAiB,CAAC,CAC/CT,YAAY,CAACiB,OAAO,CAAC,YAAY,CAAE,GAAG,CAAC,CACvCjB,YAAY,CAACiB,OAAO,CAAC,QAAQ,CAAEH,MAAM,CAAC,CACtChB,aAAa,CAAC,IAAI,CAAC,CACnB,MAAO,CAAAc,QAAQ,CAAC,CAAC,CACnB,CAAE,MAAOM,KAAK,CAAE,CACdC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEF,KAAK,CAACG,OAAO,CAAC,CACtC,CACF,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1BtB,YAAY,CAACuB,UAAU,CAAC,YAAY,CAAC,CACrCvB,YAAY,CAACuB,UAAU,CAAC,QAAQ,CAAC,CACjCzB,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,mBACET,IAAA,CAACE,WAAW,CAACiC,QAAQ,EACnBC,KAAK,CAAE,CACLhC,UAAU,CACVC,QAAQ,CAAE4B,aAAa,CACvB3B,OAAO,CAAEgB,YACX,CAAE,CAAAe,QAAA,CAED7B,KAAK,CAAC6B,QAAQ,CACK,CAAC,CAE3B,CAEA,cAAe,CAAAnC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}