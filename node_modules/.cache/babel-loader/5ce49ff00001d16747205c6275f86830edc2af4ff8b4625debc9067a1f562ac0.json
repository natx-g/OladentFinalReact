{"ast":null,"code":"import React,{useState,useEffect,useReducer,useContext}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import Card from\"../UI/Card/Card\";import Button from\"../UI/Button/Button\";import styles from\"./Login.module.css\";import AuthContext from\"../../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function reducer(state,action){switch(action.type){case\"UPDATE_EMAIL\":return{...state,email:action.payload,emailIsValid:action.payload.includes(\"@\")};case\"UPDATE_PASSWORD\":return{...state,password:action.payload,passwordIsValid:action.payload.trim().length>6};case\"INPUT_BLUR\":return{...state,emailIsValid:state.email.includes(\"@\"),passwordIsValid:state.password.trim().length>6};default:return state;}}function Login(){var _location$state,_location$state$from;const{onLogin}=useContext(AuthContext);const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/\";const[formIsValid,setFormIsValid]=useState(false);const[state,dispatch]=useReducer(reducer,{email:\"\",emailIsValid:null,password:\"\",passwordIsValid:null});const{emailIsValid,passwordIsValid}=state;useEffect(()=>{const timer=setTimeout(()=>{setFormIsValid(emailIsValid&&passwordIsValid);},500);return()=>{clearTimeout(timer);};},[emailIsValid,passwordIsValid]);const emailChangeHandler=event=>{dispatch({type:\"UPDATE_EMAIL\",payload:event.target.value});};const passwordChangeHandler=event=>{dispatch({type:\"UPDATE_PASSWORD\",payload:event.target.value});};const validateHandler=()=>{dispatch({type:\"INPUT_BLUR\"});};const submitHandler=event=>{event.preventDefault();onLogin(state.email,()=>{navigate(from,{replace:true});});};return/*#__PURE__*/_jsx(Card,{className:styles.login,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.control,\" \").concat(state.emailIsValid===false?styles.invalid:\"\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Correo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:state.email,onChange:emailChangeHandler,onBlur:validateHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.control,\" \").concat(state.passwordIsValid===false?styles.invalid:\"\"),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:state.password,onChange:passwordChangeHandler,onBlur:validateHandler})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.actions,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:!formIsValid,children:\"Login\"})})]})});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","useNavigate","useLocation","Card","Button","styles","AuthContext","jsx","_jsx","jsxs","_jsxs","reducer","state","action","type","email","payload","emailIsValid","includes","password","passwordIsValid","trim","length","Login","_location$state","_location$state$from","onLogin","navigate","location","from","pathname","formIsValid","setFormIsValid","dispatch","timer","setTimeout","clearTimeout","emailChangeHandler","event","target","value","passwordChangeHandler","validateHandler","submitHandler","preventDefault","replace","className","login","children","onSubmit","concat","control","invalid","htmlFor","id","onChange","onBlur","actions","disabled"],"sources":["/Users/natxgarcia/Bedu/final-oladent/src/components/Login/Login.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\n\nimport Card from \"../UI/Card/Card\";\nimport Button from \"../UI/Button/Button\";\nimport styles from \"./Login.module.css\";\nimport AuthContext from \"../../context/AuthContext\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"UPDATE_EMAIL\":\n      return {\n        ...state,\n        email: action.payload,\n        emailIsValid: action.payload.includes(\"@\"),\n      };\n    case \"UPDATE_PASSWORD\":\n      return {\n        ...state,\n        password: action.payload,\n        passwordIsValid: action.payload.trim().length > 6,\n      };\n    case \"INPUT_BLUR\":\n      return {\n        ...state,\n        emailIsValid: state.email.includes(\"@\"),\n        passwordIsValid: state.password.trim().length > 6,\n      };\n    default:\n      return state;\n  }\n}\n\nfunction Login() {\n  const { onLogin } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const from = location.state?.from?.pathname || \"/\";\n\n  const [formIsValid, setFormIsValid] = useState(false);\n\n  const [state, dispatch] = useReducer(reducer, {\n    email: \"\",\n    emailIsValid: null,\n    password: \"\",\n    passwordIsValid: null,\n  });\n\n  const { emailIsValid, passwordIsValid } = state;\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setFormIsValid(emailIsValid && passwordIsValid);\n    }, 500);\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [emailIsValid, passwordIsValid]);\n\n  const emailChangeHandler = (event) => {\n    dispatch({ type: \"UPDATE_EMAIL\", payload: event.target.value });\n  };\n\n  const passwordChangeHandler = (event) => {\n    dispatch({ type: \"UPDATE_PASSWORD\", payload: event.target.value });\n  };\n\n  const validateHandler = () => {\n    dispatch({ type: \"INPUT_BLUR\" });\n  };\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    onLogin(state.email, () => {\n      navigate(from, { replace: true });\n    });\n  };\n\n  return (\n    <Card className={styles.login}>\n      <form onSubmit={submitHandler}>\n        <div\n          className={`${styles.control} ${\n            state.emailIsValid === false ? styles.invalid : \"\"\n          }`}\n        >\n          <label htmlFor=\"email\">Correo</label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={state.email}\n            onChange={emailChangeHandler}\n            onBlur={validateHandler}\n          />\n        </div>\n        <div\n          className={`${styles.control} ${\n            state.passwordIsValid === false ? styles.invalid : \"\"\n          }`}\n        >\n          <label htmlFor=\"password\">Contrase√±a</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={state.password}\n            onChange={passwordChangeHandler}\n            onBlur={validateHandler}\n          />\n        </div>\n        <div className={styles.actions}>\n          <Button\n            type=\"submit\"\n            disabled={!formIsValid}\n          >\n            Login\n          </Button>\n        </div>\n      </form>\n    </Card>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}